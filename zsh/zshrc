setopt histignorespace

# Auto-attach to tmux (skip if NVIM_RESTART is set)
# if command -v tmux &> /dev/null && [ -z "$TMUX" ] && [ -z "$NVIM_RESTART" ]; then
#     cd ~/herd
#     while true; do
#         if [ "$(tmux list-sessions 2>/dev/null | wc -l)" -gt 1 ]; then
#             # Multiple sessions - show picker
#             tmux attach \; choose-tree -s
#         else
#             tmux attach 2>/dev/null || tmux new -s main
#         fi
#     done
# fi

export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="robbyrussell"
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=#757575'
ZSH_AUTOSUGGEST_HISTORY_IGNORE="nvr *"

plugins=(
    git
    zsh-autosuggestions
    zsh-syntax-highlighting
)

source $ZSH/oh-my-zsh.sh

# Ignore commands starting with space in history
setopt HIST_IGNORE_SPACE

# Nvim restart helper (used by <leader>rc) - only "nvr" appears in history
nvr() { cd "$1" && clear && nvim "${2:-}"; }

export PATH="$PATH:$HOME/.composer/vendor/bin"
export PATH="$PATH:$HOME/.bin"
export PATH="$PATH:$HOME/.local/bin"
export PATH="/usr/local/sbin:$PATH"
export PATH="/opt/homebrew/bin:$PATH"
export PATH="/Users/karlm/Library/Python/3.13/bin:$PATH"

# OS
alias nz="nvim ~/.zshrc"
alias lz="lazygit"
alias yeet="sudo rm -rf"
alias vim="nvim"
alias nv="clear && neovide ."
alias brewup="brew update && brew upgrade && brew upgrade --greedy && brew cleanup && open /Applications/Raycast.app/"
alias mkd="mkdir -p"
alias sourcez="source ~/.zshrc"
alias code.="code ."
alias ps.="phpstorm ."

# Laravel
alias a="php artisan"
alias solo="a solo"
alias pam="a migrate"
alias pamf="a migrate:fresh"
alias pamfs="a migrate:fresh --seed"

# Laravel Test
alias test="clear && a test"
alias tp="clear && a test -p"
alias tf="clear && a test --filter"

# Laravel Vendor
alias dust="./vendor/bin/duster fix"
alias duster="./vendor/bin/duster"
alias pint="./vendor/bin/pint"
alias pail="a pail"
alias stan="./vendor/bin/phpstan analyse"
alias pest="./vendor/bin/pest"

# Filament
alias fu="a make:filament-user"
alias frg="a make:filament-resource --generate"
alias res="a make:filament-resource"
alias fp="a make:filament-page"
alias frm="a make:filament-relation-manager"

# NPM
alias watch="npm run watch"
alias prod="npm run production"
alias dev="npm run dev"
alias build="npm run build"

# Python
alias python="python3"
alias pip="pip3"

# Herd injected PHP binary.
export PATH="/Users/karlm/Library/Application Support/Herd/bin/":$PATH

# Herd injected PHP 8.4 configuration.
export HERD_PHP_84_INI_SCAN_DIR="/Users/karlm/Library/Application Support/Herd/config/php/84/"

# Herd injected PHP 8.3 configuration.
export HERD_PHP_83_INI_SCAN_DIR="/Users/karlm/Library/Application Support/Herd/config/php/83/"

# Herd injected PHP 8.2 configuration.
export HERD_PHP_82_INI_SCAN_DIR="/Users/karlm/Library/Application Support/Herd/config/php/82/"

# Herd injected PHP 8.5 configuration.
export HERD_PHP_85_INI_SCAN_DIR="/Users/karlm/Library/Application Support/Herd/config/php/85/"

